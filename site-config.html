<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>站点管理 - 智慧运维系统</title>
    <!-- 引入 Font Awesome 图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入标签管理CSS -->
    <link rel="stylesheet" href="tag-management.css">
    <!-- 引入导航栏模板JS -->
    <script src="navbar-template.js"></script>
    <!-- 引入标签管理JS -->
    <script src="tag-management.js"></script>
    <style>
        :root {
            --primary-color: #49A18D; /* 清安绿 */
            --secondary-color: #3D8C7D;
            --light-color: #F5F7F9;
            --border-color: #E2E8F0;
            --text-color: #333333;
            --light-text: #FFFFFF;
            --gray-text: #6C757D;
            --radius: 8px;
            --shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            --warning-color: #F59E0B;
            --table-hover-bg: rgba(73, 161, 141, 0.05);
            --table-header-bg: #f5f7f9;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #FAFAFA;
            color: var(--text-color);
            font-size: 14px;
        }

        .main-content {
            padding: 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* 面包屑导航 */
        .breadcrumb {
            display: flex;
            padding: 10px 0;
            margin-bottom: 20px;
            list-style: none;
            font-size: 0.9rem;
        }

        .breadcrumb-item {
            color: var(--gray-text);
        }

        .breadcrumb-item a {
            color: var(--gray-text);
            text-decoration: none;
        }

        .breadcrumb-item a:hover {
            color: var(--primary-color);
        }

        .breadcrumb-item + .breadcrumb-item::before {
            content: "/";
            padding: 0 8px;
            color: var(--gray-text);
        }

        .breadcrumb-item.active {
            color: var(--primary-color);
            font-weight: 500;
        }

        /* 页面标题 */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            background-color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.04);
        }

        .page-left {
            display: flex;
            align-items: center;
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--text-color);
            margin-right: 10px;
        }

        .data-count {
            color: var(--gray-text);
            font-size: 14px;
            display: flex;
            align-items: center;
        }

        .data-count i {
            margin-right: 5px;
            color: var(--primary-color);
        }

        /* 操作工具栏 */
        .action-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .left-actions, .right-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: var(--radius);
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.2s ease;
            border: none;
            font-weight: normal;
        }

        .btn i {
            font-size: 14px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: white;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background-color: var(--light-color);
        }

        /* 搜索框 */
        .search-box {
            display: flex;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            overflow: hidden;
            background-color: white;
            height: 36px;
            align-items: stretch;
        }

        .search-input {
            padding: 8px 12px;
            border: none;
            outline: none;
            font-size: 14px;
            min-width: 200px;
        }

        .search-btn {
            background-color: var(--light-color);
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            color: var(--gray-text);
        }

        .search-btn:hover {
            background-color: var(--border-color);
        }

        /* 表格样式 */
        .table-container {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: auto;
            margin-bottom: 20px;
        }

        table {
            border-collapse: separate;
            border-spacing: 0;
            width: 100%;
        }

        thead th {
            position: sticky;
            top: 0;
            z-index: 1;
            background-color: var(--table-header-bg);
            font-weight: 500;
        }

        th, td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
            height: 56px; /* 统一行高 */
            white-space: nowrap;
        }

        tbody tr {
            transition: background-color 0.2s;
            height: 56px; /* 统一行高 */
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-active {
            background-color: rgba(73, 161, 141, 0.1);
            color: var(--primary-color);
        }

        .status-inactive {
            background-color: rgba(220, 53, 69, 0.1);
            color: #DC3545; /* 红色 */
        }

        .status-warning {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning-color); /* 橙色 */
        }

        /* 操作按钮 */
        .action-btns {
            display: flex;
            gap: 12px;
            align-items: center;
            height: 100%;
            white-space: nowrap;
        }

        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px; /* 稍微增大图标尺寸 */
            color: var(--gray-text);
            transition: color 0.2s;
            padding: 0; /* 移除内边距，让图标更紧凑 */
            line-height: 1; /* 确保图标垂直居中 */
        }

        .action-btn:hover {
            color: var(--primary-color);
        }

        .action-btn.edit:hover {
            color: #4299e1; /* 蓝色 */
        }

        .action-btn.delete:hover {
            color: #e53e3e; /* 红色 */
        }

        .action-btn.config:hover {
            color: #805ad5; /* 紫色 */
        }

        .btn-small {
            padding: 4px 8px;
            font-size: 12px;
            margin-left: 4px;
        }

        .btn-config {
            background-color: #805ad5; /* 紫色 */
            color: white;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .btn-config:hover {
            background-color: #6b46c1;
        }

        /* 表格单元格样式 */
        td {
            min-height: 48px; /* 确保所有单元格高度一致 */
            height: 48px;
            line-height: 1.5;
            position: relative;
        }

        /* 投运天数统一样式 */
        .operation-days {
            display: inline-block;
            width: 100%;
            text-align: center;
        }

        /* 表格行高度统一 */
        tbody tr {
            height: 48px;
        }

        /* 分页 */
        .pagination {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }

        .page-info {
            font-size: 14px;
            color: var(--gray-text);
        }

        .pagination-btn {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
            border: 1px solid var(--border-color);
            color: var(--gray-text);
            cursor: pointer;
        }

        .pagination-btn:hover {
            background-color: var(--light-color);
        }

        .pagination-btn:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        /* 响应式设计 */
        @media (max-width: 900px) {
            .action-toolbar {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .right-actions {
                width: 100%;
            }

            .search-box {
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .table-container {
                overflow-x: auto;
            }

            .table-container table {
                min-width: 800px; /* 确保在小屏幕上表格能够水平滚动 */
            }
        }

        /* 标签管理按钮 */
        .tag-manage-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--gray-text);
            font-size: 14px;
            margin-left: 5px;
            padding: 2px 5px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .tag-manage-btn:hover {
            background-color: rgba(73, 161, 141, 0.1);
            color: var(--primary-color);
        }

        /* 标签管理对话框 */
        .tag-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
            z-index: 1000;
        }

        .tag-modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            width: 70%;
            max-width: 800px;
            border-radius: var(--radius);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .tag-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .tag-title {
            font-size: 1.25rem;
            font-weight: 500;
        }

        .close-tag-modal {
            cursor: pointer;
            font-size: 1.5rem;
        }

        .tag-search-add {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .tag-count {
            color: var(--gray-text);
            font-size: 14px;
        }

        .tag-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .tag-table th, .tag-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tag-table th {
            background-color: var(--light-color);
            font-weight: 500;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

        .tag-edit-btn, .tag-delete-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .tag-edit-btn {
            color: var(--primary-color);
        }

        .tag-delete-btn {
            color: #e53e3e;
        }

        .tag-edit-btn:hover, .tag-delete-btn:hover {
            background-color: var(--light-color);
        }

        /* 标签编辑对话框 */
        .edit-tag-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
            z-index: 1100;
        }

        .edit-tag-content {
            background-color: white;
            margin: 10% auto;
            padding: 20px;
            width: 400px;
            border-radius: var(--radius);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .edit-tag-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .edit-tag-title {
            font-size: 1.1rem;
            font-weight: 500;
        }

        .close-edit-tag {
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--gray-text);
        }

        .edit-tag-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-field {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .required::before {
            content: "*";
            color: #e53e3e;
            margin-right: 5px;
        }

        .tag-input {
            padding: 8px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            font-size: 14px;
        }

        .color-picker {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .color-box {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            cursor: pointer;
        }

        .color-value {
            padding: 5px 8px;
            background-color: var(--light-color);
            border-radius: 4px;
            font-size: 12px;
            font-family: monospace;
        }

        .tag-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .status-text {
            margin-left: 8px;
            font-size: 14px;
            vertical-align: middle;
        }

        /* 管理按钮 */
        .manage-btn {
            display: inline-block;
            padding: 2px 6px;
            background-color: #f0f9f6;
            color: var(--primary-color);
            border-radius: 4px;
            font-size: 12px;
            margin-left: 5px;
            border: none;
            cursor: pointer;
            vertical-align: middle;
        }

        .manage-btn:hover {
            background-color: #e0f2ed;
        }

        /* 标签样式 */
        .tag-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            background-color: #f0f9f6;
            color: var(--primary-color);
            border: 1px solid #e0f2ed;
        }

        /* 配置站点按钮样式 - 优化使其更显眼 */
        .site-config-btn {
            background-color: var(--primary-color); /* 使用主色背景 */
            color: white; /* 使用白色文字 */
            border: none;
            cursor: pointer;
            padding: 0 8px;
            font-size: 12px; /* 可以适当减小字体大小 */
            border-radius: 4px; /* 添加圆角 */
            white-space: nowrap; /* 保持不换行 */
            transition: background-color 0.2s; /* 添加过渡效果 */
            line-height: 1.4; /* 调整行高以适应padding */
            vertical-align: middle; /* 保持垂直居中 */
            display: inline-flex; /* 使用 flex 布局以便未来添加图标 */
            align-items: center; /* 垂直居中 flex items */
            gap: 4px; /* 如果未来添加图标，设置间距 */
            height: 28px;
        }

        .site-config-btn:hover {
            background-color: var(--secondary-color); /* 鼠标悬浮时加深背景色 */
            color: white; /* 保持文字颜色 */
        }

        .site-config-btn i {
            font-size: 12px;
        }

        /* 排序表头样式 */
        .sortable {
            cursor: pointer;
            user-select: none;
            position: relative;
            padding-right: 25px !important;
        }

        .sortable:hover {
            background-color: rgba(73, 161, 141, 0.08);
        }

        .sortable::after {
            content: '↕';
            position: absolute;
            right: 8px;
            color: #ccc;
            font-size: 14px;
            top: 50%;
            transform: translateY(-50%);
        }

        .sortable.asc::after {
            content: '↑';
            color: var(--primary-color);
        }

        .sortable.desc::after {
            content: '↓';
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <!-- 导航栏容器 -->
    <div id="navbar-container"></div>

    <!-- 主内容区域 -->
    <div class="main-content">
        <!-- 面包屑导航 -->
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="site-homepage.html">首页</a></li>
            <li class="breadcrumb-item">后台管理</li>
            <li class="breadcrumb-item active">站点管理</li>
        </ul>

        <!-- 页面标题 -->
        <div class="page-header">
            <div class="page-left">
                <h1 class="page-title">站点管理</h1>
                <span class="data-count"><i class="fas fa-table"></i> 共 160 个站点</span>
            </div>
            <div class="right-actions">
                <div class="search-box">
                    <input type="text" class="search-input" id="site-search" placeholder="搜索站点名称、企业...">
                    <button class="search-btn" id="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <button class="btn btn-primary" id="add-site-btn">
                    <i class="fas fa-plus"></i> 新增站点
                </button>
            </div>
        </div>

        <!-- 表格区域 -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th width="3%">序号</th>
                        <th width="12%">站点名称</th>
                        <th width="15%" class="sortable" data-sort="company">归属企业 <button class="manage-btn">管理</button></th>
                        <th width="10%" class="sortable" data-sort="tag">站点标签 <button class="tag-manage-btn" title="管理标签"><i class="fas fa-tags"></i></button></th>
                        <th width="15%">站点位置</th>
                        <th width="5%" class="sortable" data-sort="device-count">设备数量</th>
                        <th width="10%" class="sortable" data-sort="create-date">创建日期</th>
                        <th width="6%" class="sortable" data-sort="status">投运状态</th>
                        <th width="6%" class="sortable" data-sort="operation-days">投运天数</th>
                        <th width="8%">操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>金华电器储能电站</td>
                        <td>重庆金华电器成套有限公司</td>
                        <td><span class="tag-badge">用户侧</span></td>
                        <td>重庆市高新区火炬路46号</td>
                        <td>2</td>
                        <td>-</td>
                        <td>
                            <label class="switch">
                                <input type="checkbox" class="status-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </td>
                        <td>-</td>
                        <td class="action-btns">
                            <button class="action-btn edit" title="修改"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete" title="删除"><i class="fas fa-trash-alt"></i></button>
                            <button class="site-config-btn" title="配置站点">配置站点</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>成都鑫众泰储能电站</td>
                        <td>成都鑫众泰通用电气有限责任公司</td>
                        <td><span class="tag-badge">用户侧</span></td>
                        <td>成都市高新区</td>
                        <td>1</td>
                        <td>-</td>
                        <td>
                            <label class="switch">
                                <input type="checkbox" class="status-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </td>
                        <td><span class="operation-days">-</span></td>
                        <td class="action-btns">
                            <button class="action-btn edit" title="修改"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete" title="删除"><i class="fas fa-trash-alt"></i></button>
                            <button class="site-config-btn" title="配置站点">配置站点</button>
                        </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>南京清研院储能电站</td>
                        <td>南京清研院</td>
                        <td><span class="tag-badge">用户侧</span></td>
                        <td>南京</td>
                        <td>2</td>
                        <td>-</td>
                        <td>
                            <label class="switch">
                                <input type="checkbox" class="status-toggle">
                                <span class="slider"></span>
                            </label>
                        </td>
                        <td><span class="operation-days">-</span></td>
                        <td class="action-btns">
                            <button class="action-btn edit" title="修改"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete" title="删除"><i class="fas fa-trash-alt"></i></button>
                            <button class="site-config-btn" title="配置站点">配置站点</button>
                        </td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>广东中建储能电站</td>
                        <td>江苏顶晶融合电力工程有限公司</td>
                        <td><span class="tag-badge">用户侧</span></td>
                        <td>广东惠州工业园储能站</td>
                        <td>1</td>
                        <td>2022-10-29 11:47:50</td>
                        <td>
                            <label class="switch">
                                <input type="checkbox" class="status-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </td>
                        <td><span class="operation-days">901</span></td>
                        <td class="action-btns">
                            <button class="action-btn edit" title="修改"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete" title="删除"><i class="fas fa-trash-alt"></i></button>
                            <button class="site-config-btn" title="配置站点">配置站点</button>
                        </td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>西藏林芝储能电站</td>
                        <td>四川省迭变电建设有限责任公司</td>
                        <td><span class="tag-badge" style="background-color: #e6f7ff; color: #1890ff; border-color: #d6e8ff;">台区配储</span></td>
                        <td>西藏林芝</td>
                        <td>1</td>
                        <td>2022-10-29 11:47:50</td>
                        <td>
                            <label class="switch">
                                <input type="checkbox" class="status-toggle">
                                <span class="slider"></span>
                            </label>
                        </td>
                        <td><span class="operation-days">901</span></td>
                        <td class="action-btns">
                            <button class="action-btn edit" title="修改"><i class="fas fa-edit"></i></button>
                            <button class="action-btn delete" title="删除"><i class="fas fa-trash-alt"></i></button>
                            <button class="site-config-btn" title="配置站点">配置站点</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 分页 -->
        <div class="pagination">
            <span class="page-info">显示 1-5 条，共 160 条</span>
            <button class="pagination-btn" id="prev-page" disabled><i class="fas fa-chevron-left"></i></button>
            <button class="pagination-btn" id="next-page"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>

    <!-- 标签管理对话框 -->
    <div class="tag-modal" id="tag-management-modal">
        <div class="tag-modal-content">
            <div class="tag-header">
                <h2 class="tag-title">站点列表 > 标签管理</h2>
                <span class="close-tag-modal">&times;</span>
            </div>
            <div class="tag-search-add">
                <span class="tag-count">共 3 条信息</span>
                <button class="btn btn-primary" id="add-tag-btn">
                    <i class="fas fa-plus"></i> 新增标签
                </button>
            </div>
            <table class="tag-table">
                <thead>
                    <tr>
                        <th width="10%">序号</th>
                        <th width="40%">标签名</th>
                        <th width="20%">使用/禁用</th>
                        <th width="15%">最近修改日期</th>
                        <th width="15%">操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>用户侧</td>
                        <td>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </td>
                        <td>2024-04-24 10:01:07</td>
                        <td>
                            <button class="tag-edit-btn" title="修改"><i class="fas fa-edit"></i> 修改</button>
                            <button class="tag-delete-btn" title="删除"><i class="fas fa-trash-alt"></i> 删除</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>源网侧</td>
                        <td>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </td>
                        <td>2024-04-24 10:00:16</td>
                        <td>
                            <button class="tag-edit-btn" title="修改"><i class="fas fa-edit"></i> 修改</button>
                            <button class="tag-delete-btn" title="删除"><i class="fas fa-trash-alt"></i> 删除</button>
                        </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>台区配储</td>
                        <td>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider"></span>
                            </label>
                        </td>
                        <td>2024-05-28 10:58:31</td>
                        <td>
                            <button class="tag-edit-btn" title="修改"><i class="fas fa-edit"></i> 修改</button>
                            <button class="tag-delete-btn" title="删除"><i class="fas fa-trash-alt"></i> 删除</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 编辑标签对话框 -->
    <div class="edit-tag-modal" id="edit-tag-modal">
        <div class="edit-tag-content">
            <div class="edit-tag-header">
                <h3 class="edit-tag-title">编辑标签</h3>
                <span class="close-edit-tag">&times;</span>
            </div>
            <div class="edit-tag-form">
                <div class="form-field">
                    <label for="tag-name" class="required">标签名</label>
                    <input type="text" id="tag-name" class="tag-input" value="用户侧">
                </div>
                <div class="form-field">
                    <label for="tag-color" class="required">颜色</label>
                    <div class="color-picker">
                        <div class="color-box" style="background-color: #7DBE1C;"></div>
                        <span class="color-value">#7DBE1C</span>
                    </div>
                </div>
                <div class="form-field">
                    <label>是否启用</label>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="tag-actions">
                    <button class="btn btn-secondary" id="cancel-tag-edit">取消</button>
                    <button class="btn btn-primary" id="confirm-tag-edit">确定</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 模态框 - 新增/编辑站点 -->
    <div class="modal" id="site-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.4); z-index: 1000;">
        <div class="modal-content" style="background-color: white; margin: 10% auto; padding: 20px; width: 60%; border-radius: var(--radius); box-shadow: 0 4px 8px rgba(0,0,0,0.1); max-width: 550px;">
            <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee;">
                <h2 style="font-size: 1.25rem; font-weight: 500;">编辑站点</h2>
                <span class="close-modal" style="cursor: pointer; font-size: 1.5rem; color: #999;">&times;</span>
            </div>
            <div class="modal-body">
                <form id="site-form">
                    <div class="form-group" style="margin-bottom: 18px;">
                        <label for="site-name" style="display: block; margin-bottom: 8px; font-weight: 500;"><span style="color: #e53e3e; margin-right: 4px;">*</span>站点名称</label>
                        <input type="text" id="site-name" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: var(--radius);" placeholder="请输入站点名称">
                    </div>
                    <div class="form-group" style="margin-bottom: 18px;">
                        <label for="company" style="display: block; margin-bottom: 8px; font-weight: 500;"><span style="color: #e53e3e; margin-right: 4px;">*</span>归属企业</label>
                        <div style="position: relative;">
                            <input type="text" id="company" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: var(--radius);" placeholder="请选择归属企业">
                            <i class="fas fa-angle-down" style="position: absolute; right: 10px; top: 13px; color: #999;"></i>
                        </div>
                    </div>
                    <div class="form-group" style="margin-bottom: 18px;">
                        <label for="site-tags" style="display: block; margin-bottom: 8px; font-weight: 500;">添加标签</label>
                        <div class="tag-selector" style="position: relative;">
                            <div class="selected-tags" style="display: flex; flex-wrap: wrap; gap: 5px; border: 1px solid var(--border-color); border-radius: var(--radius); padding: 5px; min-height: 42px;">
                                <div class="tag-item" style="display: flex; align-items: center; background: #f0f9f6; color: var(--primary-color); padding: 3px 8px; border-radius: 4px; font-size: 14px;">
                                    用户侧
                                    <span class="tag-remove" style="margin-left: 5px; cursor: pointer; color: #999;">&times;</span>
                                </div>
                                <i class="fas fa-chevron-down" style="position: absolute; right: 10px; top: 13px; color: #999;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="form-group" style="margin-bottom: 18px;">
                        <label for="site-location" style="display: block; margin-bottom: 8px; font-weight: 500;"><span style="color: #e53e3e; margin-right: 4px;">*</span>场站位置</label>
                        <div style="position: relative;">
                            <input type="text" id="site-location" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: var(--radius);" placeholder="请输入场站位置">
                            <i class="fas fa-map-marker-alt" style="position: absolute; right: 10px; top: 13px; color: var(--primary-color);"></i>
                        </div>
                    </div>
                    <div class="form-group" style="margin-bottom: 18px;">
                        <label for="site-contact" style="display: block; margin-bottom: 8px; font-weight: 500;">联系方式</label>
                        <input type="text" id="site-contact" style="width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: var(--radius);" placeholder="请输入联系方式">
                    </div>
                    <div class="form-group" style="margin-bottom: 18px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">场站照片</label>
                        <div class="image-upload-container" style="display: flex; gap: 10px;">
                            <div class="image-preview" style="width: 120px; height: 120px; border: 1px solid #eee; position: relative; overflow: hidden;">
                                <img src="https://via.placeholder.com/120x120" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <div class="image-upload" style="width: 120px; height: 120px; border: 1px dashed #ccc; display: flex; justify-content: center; align-items: center; flex-direction: column; cursor: pointer;">
                                <i class="fas fa-plus" style="color: #ccc; font-size: 24px;"></i>
                                <span style="color: #999; font-size: 12px; margin-top: 5px;">点击上传图片</span>
                            </div>
                            <div class="image-upload" style="width: 120px; height: 120px; border: 1px dashed #ccc; display: flex; justify-content: center; align-items: center; flex-direction: column; cursor: pointer;">
                                <i class="fas fa-plus" style="color: #ccc; font-size: 24px;"></i>
                                <span style="color: #999; font-size: 12px; margin-top: 5px;">点击上传图片</span>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee;">
                <button class="btn btn-secondary" id="cancel-site" style="min-width: 80px;">取消</button>
                <button class="btn btn-primary" id="save-site" style="min-width: 80px;">确定</button>
            </div>
        </div>
    </div>

    <!-- 引入页面脚本 -->
    <script>
        // 初始化导航栏
        document.addEventListener('DOMContentLoaded', function() {
            // 如果存在导航栏初始化函数，则调用
            if (typeof initNavbar === 'function') {
                initNavbar();
                
                // 设置活动菜单项
                if (typeof setActiveMenuItem === 'function') {
                    // 设置"后台管理"为活动菜单
                    setActiveMenuItem('menu-admin', 'submenu-site-config');
                }
            }

            // 表格排序功能
            const sortableThs = document.querySelectorAll('th.sortable');
            let lastSortedTh = null; // 记录上一次排序的列
            
            sortableThs.forEach(th => {
                th.addEventListener('click', function() {
                    const sortBy = this.getAttribute('data-sort');
                    const tbody = document.querySelector('tbody');
                    const rows = Array.from(tbody.querySelectorAll('tr'));
                    
                    // 移除所有表头的排序状态
                    if (lastSortedTh && lastSortedTh !== this) {
                        lastSortedTh.classList.remove('asc', 'desc');
                    }
                    
                    // 切换排序方向
                    const isAsc = this.classList.contains('asc');
                    this.classList.remove('asc', 'desc');
                    this.classList.add(isAsc ? 'desc' : 'asc');
                    
                    // 记录当前排序的列
                    lastSortedTh = this;
                    
                    // 排序函数
                    const compareFn = (a, b) => {
                        let valA, valB;
                        
                        // 根据不同的列获取相应的值
                        switch(sortBy) {
                            case 'company':
                                valA = a.cells[2].textContent.trim();
                                valB = b.cells[2].textContent.trim();
                                break;
                            case 'tag':
                                valA = a.cells[3].textContent.trim();
                                valB = b.cells[3].textContent.trim();
                                break;
                            case 'device-count':
                                valA = parseInt(a.cells[5].textContent.trim()) || 0;
                                valB = parseInt(b.cells[5].textContent.trim()) || 0;
                                break;
                            case 'create-date':
                                // 处理日期，如果是"-"则视为最小值
                                valA = a.cells[6].textContent.trim();
                                valB = b.cells[6].textContent.trim();
                                if (valA === '-') return isAsc ? -1 : 1;
                                if (valB === '-') return isAsc ? 1 : -1;
                                // 将日期转换为时间戳比较
                                valA = new Date(valA).getTime() || 0;
                                valB = new Date(valB).getTime() || 0;
                                break;
                            case 'status':
                                valA = a.cells[7].querySelector('input').checked ? 1 : 0;
                                valB = b.cells[7].querySelector('input').checked ? 1 : 0;
                                break;
                            case 'operation-days':
                                // 处理投运天数，如果是"-"则视为0
                                valA = a.cells[8].textContent.trim();
                                valB = b.cells[8].textContent.trim();
                                valA = valA === '-' ? 0 : parseInt(valA);
                                valB = valB === '-' ? 0 : parseInt(valB);
                                break;
                            default:
                                return 0;
                        }
                        
                        // 根据排序方向比较值
                        if (valA < valB) return isAsc ? -1 : 1;
                        if (valA > valB) return isAsc ? 1 : -1;
                        return 0;
                    };
                    
                    // 对行进行排序
                    rows.sort(compareFn);
                    
                    // 重新排序的行添加回tbody
                    rows.forEach((row, index) => {
                        // 更新序号列
                        row.cells[0].textContent = index + 1;
                        tbody.appendChild(row);
                    });
                });
            });

            // 模态框相关操作
            const modal = document.getElementById('site-modal');
            const addSiteBtn = document.getElementById('add-site-btn');
            const closeModal = document.querySelector('.close-modal');
            const cancelBtn = document.getElementById('cancel-site');
            const saveBtn = document.getElementById('save-site');
            const editBtns = document.querySelectorAll('.action-btn.edit');
            
            // 打开模态框 - 新增站点
            addSiteBtn.addEventListener('click', function() {
                document.querySelector('.modal-header h2').textContent = '新增站点';
                document.getElementById('site-form').reset();
                modal.style.display = 'block';
            });
            
            // 打开模态框 - 编辑站点
            editBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const row = this.closest('tr');
                    const siteName = row.cells[1].textContent;
                    const company = row.cells[2].textContent;
                    const siteTag = row.cells[3].textContent;
                    
                    document.querySelector('.modal-header h2').textContent = '编辑站点';
                    document.getElementById('site-name').value = siteName;
                    document.getElementById('company').value = company;
                    
                    // 更新标签显示
                    const selectedTags = document.querySelector('.selected-tags');
                    selectedTags.innerHTML = `
                        <div class="tag-item" style="display: flex; align-items: center; background: #f0f9f6; color: var(--primary-color); padding: 3px 8px; border-radius: 4px; font-size: 14px;">
                            ${siteTag}
                            <span class="tag-remove" style="margin-left: 5px; cursor: pointer; color: #999;">&times;</span>
                        </div>
                        <i class="fas fa-chevron-down" style="position: absolute; right: 10px; top: 13px; color: #999;"></i>
                    `;
                    
                    // 设置场站位置和联系方式
                    document.getElementById('site-location').value = '重庆市高新区火炬路46号';
                    document.getElementById('site-contact').value = '13814012884';
                    
                    // 绑定标签删除事件
                    const tagRemoveBtns = document.querySelectorAll('.tag-remove');
                    tagRemoveBtns.forEach(btn => {
                        btn.addEventListener('click', function() {
                            this.parentElement.remove();
                        });
                    });
                    
                    modal.style.display = 'block';
                });
            });
            
            // 关闭模态框
            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            cancelBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // 保存站点信息
            saveBtn.addEventListener('click', function() {
                // 这里可以添加表单验证和数据处理逻辑
                alert('站点信息保存成功！');
                modal.style.display = 'none';
            });
            
            // 点击模态框外部关闭
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });

            // 全选/取消全选 (注释掉，因为页面中没有 id="select-all" 的元素)
            // const selectAll = document.getElementById('select-all');
            // const checkboxes = document.querySelectorAll('.site-checkbox');
            // 
            // if (selectAll) { // 添加判断，避免 null 错误
            //     selectAll.addEventListener('change', function() {
            //         checkboxes.forEach(checkbox => {
            //             checkbox.checked = this.checked;
            //         });
            //     });
            // }
            
            // 配置站点按钮点击事件 (修改选择器并添加跳转逻辑)
            const configBtns = document.querySelectorAll('.site-config-btn'); // 修改选择器
            configBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const row = this.closest('tr');
                    const siteName = row.cells[1].textContent;
                    // alert(`即将进入"${siteName}"的详细配置页面`); // 注释掉 alert
                    // 跳转到详细配置页面，并传递站点名称作为参数
                    window.location.href = `site-config-detail.html?siteName=${encodeURIComponent(siteName)}`;
                });
            });
            
            // 配置电站按钮点击事件
            const stationConfigBtns = document.querySelectorAll('.btn-config');
            stationConfigBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const row = this.closest('tr');
                    const siteName = row.cells[1].textContent;
                    alert(`即将进入"${siteName}"的电站配置页面`);
                    // 可以跳转到电站配置页面
                    // window.location.href = `station-config.html?site=${encodeURIComponent(siteName)}`;
                });
            });
            
            // 删除站点按钮点击事件
            const deleteBtns = document.querySelectorAll('.action-btn.delete');
            deleteBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const row = this.closest('tr');
                    const siteName = row.cells[1].textContent;
                    if (confirm(`确定要删除"${siteName}"站点吗？`)) {
                        // 这里可以添加删除逻辑
                        alert(`站点"${siteName}"已删除`);
                        // 可以从表格中移除该行
                        // row.remove();
                    }
                });
            });
            
            // 分页功能
            const prevPageBtn = document.getElementById('prev-page');
            const nextPageBtn = document.getElementById('next-page');
            
            // 这里可以根据实际情况实现分页逻辑
            nextPageBtn.addEventListener('click', function() {
                alert('加载下一页数据');
            });
            
            prevPageBtn.addEventListener('click', function() {
                alert('加载上一页数据');
            });

            // 标签管理功能
            const tagManageBtn = document.querySelector('.tag-manage-btn');
            const tagModal = document.getElementById('tag-management-modal');
            const closeTagModal = document.querySelector('.close-tag-modal');
            const addTagBtn = document.getElementById('add-tag-btn');
            const editTagModal = document.getElementById('edit-tag-modal');
            const closeEditTag = document.querySelector('.close-edit-tag');
            const cancelTagEdit = document.getElementById('cancel-tag-edit');
            const confirmTagEdit = document.getElementById('confirm-tag-edit');
            const tagEditBtns = document.querySelectorAll('.tag-edit-btn');
            const tagDeleteBtns = document.querySelectorAll('.tag-delete-btn');
            
            // 打开标签管理模态框
            tagManageBtn.addEventListener('click', function() {
                tagModal.style.display = 'block';
            });
            
            // 关闭标签管理模态框
            closeTagModal.addEventListener('click', function() {
                tagModal.style.display = 'none';
            });
            
            // 点击模态框外部关闭
            window.addEventListener('click', function(event) {
                if (event.target === tagModal) {
                    tagModal.style.display = 'none';
                }
                if (event.target === editTagModal) {
                    editTagModal.style.display = 'none';
                }
            });
            
            // 打开新增标签模态框
            addTagBtn.addEventListener('click', function() {
                document.querySelector('.edit-tag-title').textContent = '新增标签';
                document.getElementById('tag-name').value = '';
                document.querySelector('.color-box').style.backgroundColor = '#7DBE1C';
                document.querySelector('.color-value').textContent = '#7DBE1C';
                editTagModal.style.display = 'block';
            });
            
            // 打开编辑标签模态框
            tagEditBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const row = this.closest('tr');
                    const tagName = row.cells[1].textContent;
                    
                    document.querySelector('.edit-tag-title').textContent = '编辑标签';
                    document.getElementById('tag-name').value = tagName;
                    // 这里可以根据实际情况设置颜色
                    editTagModal.style.display = 'block';
                });
            });
            
            // 关闭编辑标签模态框
            closeEditTag.addEventListener('click', function() {
                editTagModal.style.display = 'none';
            });
            
            cancelTagEdit.addEventListener('click', function() {
                editTagModal.style.display = 'none';
            });
            
            // 保存标签信息
            confirmTagEdit.addEventListener('click', function() {
                const tagName = document.getElementById('tag-name').value;
                if (!tagName.trim()) {
                    alert('标签名不能为空！');
                    return;
                }
                
                alert('标签保存成功！');
                editTagModal.style.display = 'none';
                // 可以刷新标签列表
            });
            
            // 删除标签
            tagDeleteBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const row = this.closest('tr');
                    const tagName = row.cells[1].textContent;
                    
                    if (confirm(`确定要删除"${tagName}"标签吗？`)) {
                        alert(`标签"${tagName}"已删除`);
                        // 可以从表格中移除该行
                        // row.remove();
                    }
                });
            });

            // 初始化投运状态开关
            const statusToggles = document.querySelectorAll('.status-toggle');
            statusToggles.forEach(toggle => {
                toggle.addEventListener('change', function() {
                    const statusText = this.closest('td').querySelector('.status-text');
                    if (this.checked) {
                        statusText.textContent = '已投运';
                        statusText.className = 'status-text status-active';
                    } else {
                        statusText.textContent = '停运中';
                        statusText.className = 'status-text status-inactive';
                    }
                });
            });
        });
    </script>
</body>
</html>